Markdown

# å®¶è¨ˆç°¿ã‚¢ãƒ—ãƒª(JavaFX + MySQL + Docker)

ã“ã®ã‚¢ãƒ—ãƒªã¯ã€åæ”¯ã®ç™»éŒ²ãƒ»ä¸€è¦§è¡¨ç¤ºãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ã®ãƒ‡ãƒ¼ã‚¿ç®¡ç†ãŒã§ãã‚‹ã‚·ãƒ³ãƒ—ãƒ«ãªå®¶è¨ˆç°¿ã‚¢ãƒ—ãƒªã§ã™ã€‚
ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¯ Docker ä¸Šã® MySQL ã‚’ä½¿ç”¨ã—ã¦ãŠã‚Šã€ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§ã‚‚ç°¡å˜ã«ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã§ãã¾ã™ã€‚
---

## ä½¿ç”¨æŠ€è¡“

* Java 21
* JavaFX 21
* MySQL 8.0(Docker)
* JDBC (MySQL Connector/J)
* Eclipse / Pleiades
* Docker

â€» MySQL Connector/J ã¯å­¦ç¿’ç›®çš„ã®ãŸã‚ lib é…ä¸‹ã«é…ç½®ã—ã¦ã„ã¾ã™ã€‚  
å®Ÿå‹™ã§ã¯ Maven / Gradle ã«ã‚ˆã‚‹ä¾å­˜é–¢ä¿‚ç®¡ç†ã‚’æƒ³å®šã—ã¦ã„ã¾ã™ã€‚

---

## å‰æç’°å¢ƒï¼ˆé‡è¦ï¼‰
* JDK 21 ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨  
* Docker Desktop ãŒèµ·å‹•ã—ã¦ã„ã‚‹ã“ã¨
* JavaFX SDK 21 ã‚’åˆ¥é€”ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ã„ã‚‹ã“ã¨


âš  **æ³¨æ„**  
Java 11 ä»¥é™ã€JavaFX ã¯ JDK ã«åŒæ¢±ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚  
æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ JavaFX ã‚’ module-path æ–¹å¼ã§ä½¿ç”¨ã—ã¾ã™ã€‚

## 1. ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
```bash
git clone https://github.com/Hazuki120/kakeibo.git
cd kakeibo
```

## 2. Docker ã§ MySQL ã‚’èµ·å‹•
### èµ·å‹•
```bash
cd kakeibo
docker compose up -d
```
### åœæ­¢
```bash
docker compose down
```

MySQL æ¥ç¶šæƒ…å ±   
| é …ç›®           | å€¤         |
|----------------|------------|
| ãƒ›ã‚¹ãƒˆ         | localhost  |
| ãƒãƒ¼ãƒˆ         | 3307       |
| ãƒ¦ãƒ¼ã‚¶ãƒ¼å     | appuser    |
| ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰     | apppass    |
| ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å | kakeibo    |

â€» é–‹ç™ºç”¨ã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§ã™ã€‚
â€» `docker compose` ã§ä½œæˆã—ãŸã‚³ãƒ³ãƒ†ãƒŠã¯ `docker start kakeibo-mysql` ã§ã‚‚å†èµ·å‹•å¯èƒ½ã§ã™ã€‚

## 3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹é€ 

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ `docker-compose.yml` ã«ã‚ˆã‚Šã€
`sql/init/` é…ä¸‹ã® SQL ãƒ•ã‚¡ã‚¤ãƒ«ã¯ **MySQL ã®ãƒ‡ãƒ¼ã‚¿é ˜åŸŸï¼ˆvolumeï¼‰ãŒç©ºã®å ´åˆã®ã¿è‡ªå‹•å®Ÿè¡Œ**ã•ã‚Œã¾ã™ã€‚ 

é€šå¸¸ã¯ **æ‰‹å‹•ã§ SQL ã‚’å®Ÿè¡Œã™ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“**ã€‚

### ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å†ä½œæˆã—ãŸã„å ´åˆ

```bash
docker compose down -v
docker compose up -d
```

â€» `-v` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã‚‹ã¨ã€MySQL ã®ãƒ‡ãƒ¼ã‚¿ï¼ˆvolumeï¼‰ãŒå…¨å‰Šé™¤ã•ã‚Œã¾ã™ã€‚  



### å‚è€ƒï¼šãƒ†ãƒ¼ãƒ–ãƒ«å®šç¾©ï¼ˆé€šå¸¸ã¯è‡ªå‹•ä½œæˆï¼‰

**users ãƒ†ãƒ¼ãƒ–ãƒ«**  

```sql
CREATE TABLE users (  
	id INT AUTO_INCREMENT PRIMARY KEY,  
	username VARCHAR(50) NOT NULL,  
	password VARCHAR(100) NOT NULL,  
	email VARCHAR(100),  
	created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP  
) ENGINE=InnoDB;
```
**transactions ãƒ†ãƒ¼ãƒ–ãƒ«**

```sql
CREATE TABLE transactions (
  id INT AUTO_INCREMENT PRIMARY KEY,
  user_id INT NOT NULL,
  date DATE NOT NULL,
  category VARCHAR(50) NOT NULL,
  amount INT NOT NULL,
  memo VARCHAR(255),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
  CONSTRAINT fk_transactions_user
    FOREIGN KEY (user_id) REFERENCES users(id)
) ENGINE=InnoDB;
```
â€» `transactions` ãƒ†ãƒ¼ãƒ–ãƒ«ã¯ `users` ãƒ†ãƒ¼ãƒ–ãƒ«ã¨å¤–éƒ¨ã‚­ãƒ¼åˆ¶ç´„ã§é–¢é€£ä»˜ã‘ã¦ã„ã¾ã™ã€‚  
â€» ãƒ¦ãƒ¼ã‚¶ã”ã¨ã«å®¶è¨ˆç°¿ãƒ‡ãƒ¼ã‚¿ã‚’ç®¡ç†ã™ã‚‹æƒ³å®šã§ã™ã€‚

## 4. ã‚¢ãƒ—ãƒªã®èµ·å‹•æ–¹æ³•ï¼ˆEclipseï¼‰
### â‘  MySQL Connector/J ã‚’ãƒ“ãƒ«ãƒ‰ãƒ‘ã‚¹ã«è¿½åŠ 
`lib/mysql-connector-j-9.5.0.jar` ã‚’ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ‘ã‚¹ã«è¿½åŠ ï¼ˆClasspathï¼‰

è¨­å®šæ‰‹é †ï¼š
ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã€‘â†’ã€Java ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ‘ã‚¹ã€‘â†’ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€‘â†’ã€å¤–éƒ¨ JAR ã®è¿½åŠ ã€‘

â€» ã“ã®è¨­å®šã‚’è¡Œã‚ãªã„å ´åˆã€MySQL ã«æ¥ç¶šã§ãã¾ã›ã‚“ã€‚  

### â‘¡ JavaFX ã‚’ Modulepath ã«è¨­å®š

> â— **JavaFX ã® JAR ã‚’ Classpath ã«è¿½åŠ ã—ãªã„ã§ãã ã•ã„**
> æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ **Modulepath æ–¹å¼**ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

1. JavaFX SDK 21 ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã€ä»»æ„ã®å ´æ‰€ã«å±•é–‹
   ä¾‹ï¼š`C:\javafx\javafx-sdk-21`
2. ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã€‘â†’ã€Java ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ‘ã‚¹ã€‘â†’ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€‘
3. ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¼ã®è¿½åŠ ã€‘â†’ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¼ã€‘
4. æ–°è¦ä½œæˆï¼ˆåå‰ä¾‹ï¼š`JavaFX21`ï¼‰
5. `javafx-sdk-21/lib` é…ä¸‹ã® **ã™ã¹ã¦ã® jar** ã‚’è¿½åŠ 
6. è¿½åŠ ã—ãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒ **`[Modulepath]`** ã«ãªã£ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª


### â‘¢ VMå¼•æ•°ã‚’è¨­å®šï¼ˆé‡è¦ï¼šJavaFX ã®è­¦å‘Šå¯¾ç­–)
Eclipse ã®å®Ÿè¡Œæ§‹æˆã«ä»¥ä¸‹ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚
è¨­å®šæ‰‹é †ï¼š
Main.java â†’ å³ã‚¯ãƒªãƒƒã‚¯ â†’ ã€å®Ÿè¡Œã€‘ â†’ ã€å®Ÿè¡Œã®æ§‹æˆã€‘â†’ ã€å¼•æ•°ã€‘ â†’ã€VMå¼•æ•°ã€‘

```text
--module-path "javafx-sdk-21/lib" --add-modules javafx.controls,javafx.fxml
```

â€» **å¿…ãšçµ¶å¯¾ãƒ‘ã‚¹**ã‚’æŒ‡å®šã—ã¦ãã ã•ã„ã€‚  
â€» `/C:\...` ã®ã‚ˆã†ãªæ··åœ¨ãƒ‘ã‚¹ã¯ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚  


### â‘£ ã‚¢ãƒ—ãƒªã‚’èµ·å‹•
`Main.java` ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ã‚¢ãƒ—ãƒªãŒèµ·å‹•ã—ã¾ã™ã€‚
æ–°è¦ç™»éŒ² â†’ ãƒ­ã‚°ã‚¤ãƒ³ â†’ å®¶è¨ˆç°¿ç®¡ç†æ©Ÿèƒ½ã‚’åˆ©ç”¨ã§ãã¾ã™ã€‚

## 5. ãƒ­ã‚°ã‚¤ãƒ³æ–¹æ³•

1. ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ä¸‹éƒ¨ã®ã€Œæ–°è¦ç™»éŒ²ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¾ã™ã€‚  
2. ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã€ç™»éŒ²ã—ã¾ã™ã€‚  
3. ã€Œæˆ»ã‚‹ã€ãƒœã‚¿ãƒ³ã§ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã«æˆ»ã‚Šã¾ã™ã€‚  
4. ç™»éŒ²ã—ãŸãƒ¦ãƒ¼ã‚¶ãƒ¼åã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã€ã€Œãƒ­ã‚°ã‚¤ãƒ³ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¾ã™ã€‚  
5. å®¶è¨ˆç°¿ç®¡ç†ç”»é¢ã«é·ç§»ã—ã¾ã™ã€‚

## 6. ã‚¢ãƒ—ãƒªæ§‹æˆå›³ï¼ˆData Flow / ER å›³ï¼‰

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼å›³ï¼ˆDFDï¼‰
ã‚¢ãƒ—ãƒªå…¨ä½“ã®ãƒ‡ãƒ¼ã‚¿ã®æµã‚Œã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚  

```mermaid
flowchart LR

    User[ãƒ¦ãƒ¼ã‚¶ãƒ¼] -->|ãƒ­ã‚°ã‚¤ãƒ³æƒ…å ±å…¥åŠ›| App[å®¶è¨ˆç°¿ã‚¢ãƒ—ãƒª<br>(JavaFX + DAO)]
    App -->|ãƒ­ã‚°ã‚¤ãƒ³èªè¨¼| DB[(MySQL 8.0<br>Docker)]
    DB -->|èªè¨¼çµæœ| App

    User -->|åæ”¯å…¥åŠ›| App
    App -->|ç™»éŒ²/å‰Šé™¤/æ¤œç´¢| DB
    DB -->|åæ”¯ãƒ‡ãƒ¼ã‚¿| App
    App -->|ç”»é¢è¡¨ç¤º| User
```

### ER å›³ï¼ˆERDï¼‰
ãƒ¦ãƒ¼ã‚¶ã¨å®¶è¨ˆç°¿ãƒ‡ãƒ¼ã‚¿ï¼ˆåæ”¯ï¼‰ã¯ 1 å¯¾ å¤š ã®é–¢ä¿‚ã§ã™ã€‚

```mermaid
erDiagram

    USERS {
        int id PK
        varchar username
        varchar password
        varchar email
        timestamp created_at
    }

    TRANSACTIONS {
        int id PK
        int user_id FK
        date date
        varchar category
        int amount
        varchar memo
        timestamp created_at
    }

    USERS ||--o{ TRANSACTIONS : "1:N"
 ```
 
 ### DAOæ§‹é€ å›³ï¼ˆDAO Architecture Diagramï¼‰

ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã¨å®¶è¨ˆç°¿ãƒ‡ãƒ¼ã‚¿ã‚’æ‰±ã† DAO ã‚¯ãƒ©ã‚¹ã®è²¬å‹™ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚

![Relationship](./screenshots/Relationship.png)

 
 ## 7. ç”»é¢ã‚­ãƒ£ãƒ—ãƒãƒ£

### ğŸ” ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢
ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ã—ã¾ã™ã€‚

![login](./screenshots/login.png)

---

### ğŸ“ å®¶è¨ˆç°¿å…¥åŠ›ç”»é¢ï¼ˆåæ”¯ç™»éŒ²ï¼‰
æ—¥ä»˜ãƒ»ã‚«ãƒ†ã‚´ãƒªãƒ»é‡‘é¡ãƒ»ãƒ¡ãƒ¢ã‚’å…¥åŠ›ã—ã¦ç™»éŒ²ã§ãã¾ã™ã€‚

![input](./screenshots/input.png)

---


### ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼ã¨å¯¾å‡¦

| ã‚¨ãƒ©ãƒ¼å†…å®¹ | åŸå›  | å¯¾å‡¦ |
|-----------|------|------|
| Module javafx.controls not found | JavaFX ãŒ Modulepath ã«è¨­å®šã•ã‚Œã¦ã„ãªã„ | JavaFX ã‚’ Modulepath ã«è¿½åŠ ã™ã‚‹ |
| Application ã‚’è§£æ±ºã§ãã¾ã›ã‚“ | JavaFX ãŒã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã«è¦‹ãˆã¦ã„ãªã„ | Classpath ã§ã¯ãªã Modulepath ã‚’ä½¿ç”¨ã™ã‚‹ |
| Unsupported JavaFX configuration: classes were loaded from 'unnamed module' | JavaFX ãŒ classpath ã§èª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ | module-path ã‚’æ­£ã—ãè¨­å®šã™ã‚‹ |
| InvalidPathException: Illegal char <:> | `/C:\...` ã®ã‚ˆã†ã«ä¸æ­£ãªãƒ‘ã‚¹å½¢å¼ | `C:\...` ã® Windows ãƒ‘ã‚¹ã«ä¿®æ­£ |  


## ä»Šå¾Œã®èª²é¡Œ  
* Maven / Gradle ã¸ã®ç§»è¡Œ
* å…¥åŠ›ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®å¼·åŒ–
* UI/UX ã®æ”¹å–„
* å˜ä½“ãƒ†ã‚¹ãƒˆã®è¿½åŠ 

